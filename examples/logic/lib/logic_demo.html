<h1>NBE: Logic Circuit Editor Demo</h1>

<p>
 Compose a logic circuit from simple gates and user-defined components, and calculate its output using a simple discrete event simulation.
 The node-based editor is implemented using <a href="http://github.com/x1b/nbe" title="NBE on GitHub">NBE</a>.
</p>



<div data-ng-controller="LogicDemoController" data-ng-cloak>

    <h2>Main Circuit</h2>
    <div data-logic-circuit-editor="model.main"
         data-logic-circuit-editor-layout="layout.main"></div>

    <h2>Simulation</h2>
    <button data-ng-click="run()">Run Simulation</button>
    <div class="log" data-ng-if="messages.length">
        <h4>Simulation Log</h4>
        <ul>
            <li data-ng-repeat="msg in messages track by $index">{{ msg }}</li>
        </ul>
    </div>


    <h2>Reusable Components</h2>
    <p>

    <label>Available Components:
        <select data-ng-model="view.currentComponentId"
                data-ng-options="key as key for (key, value) in model.components">
            <option></option>
        </select>
    </label>
    <button data-ng-if="view.currentComponentId" data-ng-click="add()">add to circuit</button>
    <button data-ng-if="!view.editorOpen && view.currentComponentId" data-ng-click="openEditor()">edit {{ view.currentComponentId }}</button>
    <button data-ng-if="view.editorOpen" data-ng-click="closeEditor()">close component editor</button>
    <h2 data-ng-if="view.editorOpen">Edit Component <em>{{ view.currentComponentId }}</em></h2>
    <div data-ng-if="view.editorOpen"
         data-logic-circuit-editor="model.components[ view.currentComponentId ]"
         data-logic-circuit-editor-layout="layout.components[ view.currentComponentId ]"></div>
    </p>

    <p>
    <label>New Component:
        <input type="text" data-ng-model="view.newComponentId" placeholder="choose ID (alphanumeric)"/>
    </label>
    <button data-ng-if="view.newComponentId" data-ng-click="createComponent()">close component editor</button>
    </p>

</div>
